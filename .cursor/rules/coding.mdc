---
description: C++ class layout and coding and comment and documentation conventions
globs:
alwaysApply: true
---

# Class Layout

- Private data members first
- Public interface last
- Destructor first
- little to no ascii-art dividers
- Javadoc on almost all public functions
- struct if all public, else class
- never break encapsulation without explicit instruction
- don't call make_error_code directly unless necessary
- idiomatic boost::system::error_code check is ec.failed() not ec or !!ec
- always update the tests after changing code
- protect min max with paren (std::min)(...)
- include <algorithm> sparingly (not for min max), its costly
- always write unit tests for public headers, in corresponding cpp
- warn user when a lambda coroutine declares or uses captured values, its use-after-free
- use IILE parameters instead of captures in lambda coroutines

